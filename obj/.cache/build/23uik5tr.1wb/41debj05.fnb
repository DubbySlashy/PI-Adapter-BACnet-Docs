<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>OSIsoft Adapter for BACnet data selection configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="OSIsoft Adapter for BACnet data selection configuration ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="OSIsoftAdapterforBACnetDataSelectionConfiguration">
<h1 id="osisoft-adapter-for-bacnet-data-selection-configuration" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="5" sourceendlinenumber="5">OSIsoft Adapter for BACnet data selection configuration</h1>

<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="7" sourceendlinenumber="7">In addition to the data source configuration, you need to provide a data selection configuration to specify the data you want the BACnet adapter to collect from the data sources. </p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="9" sourceendlinenumber="9">When you add a data source, the BACnet adapter will discover devices and objects specified in the configuration.</p>
<h2 id="bacnet-device-configuration" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="11" sourceendlinenumber="11">BACnet device configuration</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="13" sourceendlinenumber="13">During data source discovery, device information for all discovered devices is retrieved by the adapter, which is subsequently available through the following REST endpoint using any configuration tool that can execute an HTTP GET command: <code>http://localhost:5590/api/v1/configuration/&lt;adapterId&gt;/DeviceConfiguration/</code>.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="15" sourceendlinenumber="15"><strong>Note:</strong> The device configuration is generated by the adapter and only supports HTTP GET and DELETE.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="17" sourceendlinenumber="17">The device configuration may be used to choose an appropriate DataCollectionMode when configuring data selection. The following is an example of BACnet device configuration that contains one routed device:</p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="18" sourceendlinenumber="35"><code class="lang-json">[
  {
    &quot;DeviceIP&quot;: &quot;10.12.8.64&quot;,
    &quot;DeviceId&quot;: 419,
    &quot;NetworkNumber&quot;: 20,
    &quot;MacAddress&quot;: &quot;ba:cb:00:5a:c4:16&quot;,
    &quot;MaxApduSupported&quot;: 480,
    &quot;SegmentationSupported&quot;: &quot;MaxSegmentation&quot;,
    &quot;ServicesSupported&quot;: [
      &quot;WhoIs&quot;,    
      &quot;IAm&quot;,
      &quot;ReadProperty&quot;,
      &quot;ReadPropertyMultiple&quot;
    ]
  }
]
</code></pre><h2 id="configure-bacnet-data-selection" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="37" sourceendlinenumber="37">Configure BACnet data selection</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="39" sourceendlinenumber="39"><strong>Note:</strong> You cannot modify BACnet data selection configurations manually. You must use the REST endpoints to add or edit the configuration.</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="41" sourceendlinenumber="41">Complete the following to configure the BACnet data selection:</p>
<ol sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="43" sourceendlinenumber="47">
<li sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="43" sourceendlinenumber="45">Using any text editor, create a file that contains an BACnet data selection in JSON form.<ul sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="44" sourceendlinenumber="45">
<li sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="44" sourceendlinenumber="44">For content structure, see <a href="#bacnet-data-selection-example" data-raw-source="[BACnet data selection example](#bacnet-data-selection-example)" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="44" sourceendlinenumber="44">BACnet data selection example</a>.</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="45" sourceendlinenumber="45">For a table of all available parameters, see <a href="#bacnet-data-selection-parameters" data-raw-source="[BACnet data selection](#bacnet-data-selection-parameters)" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="45" sourceendlinenumber="45">BACnet data selection</a>.</li>
</ul>
</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="46" sourceendlinenumber="46">Save the file, for example as <em>DataSelection.config.json</em>.</li>
<li sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="47" sourceendlinenumber="47">Use any of the <a class="xref" href="../main/V1/Configuration/Configuration%20tools.html" data-raw-source="[Configuration tools](xref:ConfigurationTools)" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="47" sourceendlinenumber="47">Configuration tools</a> capable of making HTTP requests to execute a POST command with the contents of that file to the following endpoint: <code>http://localhost:5590/api/v1/configuration/&lt;adapterId&gt;/DataSelection/</code></li>
</ol>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="49" sourceendlinenumber="49">Example using curl (run this command from the same directory where the file is located):</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="51" sourceendlinenumber="51"><strong>Note:</strong> During installation, you can add a single BACnet adapter named BACnet1. The following example uses this component name.</p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="53" sourceendlinenumber="55"><code class="lang-bash">curl -v -d &quot;@DataSelection.config.json&quot; -H &quot;Content-Type: application/json&quot; &quot;http://localhost:5590/api/v1/configuration/BACnet1/DataSelection&quot;
</code></pre><h2 id="bacnet-data-selection-schema" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="57" sourceendlinenumber="57">BACnet data selection schema</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="59" sourceendlinenumber="59">The full schema definition for the BACnet data selection configuration is in the <em>BACnet_DataSelection_schema.json</em> here:</p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="61" sourceendlinenumber="61">Windows: <em>%Program Files%\OSIsoft\Adapters\BACnet\Schemas</em></p>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="63" sourceendlinenumber="63">Linux: <em>/opt/OSIsoft/Adapters/BACnet/Schemas</em></p>
<h2 id="bacnet-data-selection-parameters" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="65" sourceendlinenumber="65">BACnet data selection parameters</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="67" sourceendlinenumber="67">The following parameters can be used to configure BACnet data selection:</p>
<table sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="69" sourceendlinenumber="80">
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Selected</strong></td>
<td>Optional</td>
<td><code>boolean</code></td>
<td>Use this field to select or clear a measurement. To select an item, set to true and specify a ScheduleId. To remove an item, leave the field empty or set to false.  If not configured, the default value is false.</td>
</tr>
<tr>
<td><strong>Name</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>The optional friendly name of the data item collected from the data source. If not configured, the default value will be the stream id.</td>
</tr>
<tr>
<td><strong>StreamID</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>The custom stream ID used to create the streams. If not specified, the BACnet adapter will generate a default stream ID based on the measurement configuration. A properly configured custom stream ID follows these rules:<br><br>Is not case-sensitive.<br>Can contain spaces.<br>Cannot start with two underscores (&quot;__&quot;).<br>Can contain a maximum of 100 characters.<br>Cannot use the following characters: / : ? # [ ] @ ! $ &amp; &#39; ( ) \ * + , ; = % &lt; &gt; &#124;<br>Cannot start or end with a period.<br>Cannot contain consecutive periods.<br>Cannot consist of only periods.</td>
</tr>
<tr>
<td><strong>DataFilterId</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>The ID of the data filter. If not specified, no data filtering will occur.</td>
</tr>
<tr>
<td><strong>DeviceIPAddress</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>Device IP Address</td>
</tr>
<tr>
<td><strong>ObjectType</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>Any of the <a class="xref" href="../OSIsoft%20Adapter%20for%20BACnet%20overview/OSIsoft%20Adapter%20for%20BACnet%20supported%20features.html#Object-Types" data-raw-source="[supported object types](xref:OSIsoftAdapterforBACnetSupportedFeatures#Object-Types)" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="76" sourceendlinenumber="76">supported object types</a></td>
</tr>
<tr>
<td><strong>ObjectId</strong></td>
<td>Required</td>
<td><code>number</code></td>
<td>BACnet object instance number</td>
</tr>
<tr>
<td><strong>DataCollectionMode</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Specifies the mode of data collection for the item. Default and only available value is Poll.</td>
</tr>
<tr>
<td><strong>PropertyIdentifier</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Specifies which property to collect from the BACnet object. If left empty, PresentValue is collected.</td>
</tr>
<tr>
<td><strong>ScheduleId</strong></td>
<td>Optional</td>
<td><code>string</code></td>
<td>Specifies a <a class="xref" href="../main/V1/Configuration/Schedules%20configuration.html" data-raw-source="[schedule ID](xref:SchedulesConfiguration)" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="80" sourceendlinenumber="80">schedule ID</a> to which the data selection item is linked. This data item will be collected on the scheduled interval if Selected is set to true.</td>
</tr>
</tbody>
</table>
<h2 id="bacnet-data-selection-example" sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="82" sourceendlinenumber="82">BACnet data selection example</h2>
<p sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="84" sourceendlinenumber="84">The following is an example of valid BACnet data selection configuration. Since the second item has selected set to false, data will not be collected for it.</p>
<pre sourcefile="V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md" sourcestartlinenumber="86" sourceendlinenumber="111"><code class="lang-json">[
 {
    &quot;Selected&quot;: true,
    &quot;Name&quot;: &quot;10.12.112.40_14.AnalogInput90&quot;,
    &quot;StreamId&quot;: &quot;10.12.112.40_14.AnalogInput90&quot;,
    &quot;DeviceIPAddress&quot;: &quot;10.12.112.40&quot;,
    &quot;DeviceId&quot;: 14,
    &quot;ObjectType&quot;: &quot;AnalogInput&quot;,
    &quot;ObjectId&quot;: 90,
    &quot;DataCollectionMode&quot;: &quot;Poll&quot;,
    &quot;ScheduleId&quot;: &quot;Schedule1&quot;
  },
  {
    &quot;Selected&quot;: false,
    &quot;Name&quot;: &quot;10.12.112.40_16.AnalogOutput70&quot;,
    &quot;StreamId&quot;: &quot;10.12.112.40_16.AnalogOutput70&quot;,
    &quot;DeviceIPAddress&quot;: &quot;10.12.112.40&quot;,
    &quot;DeviceId&quot;: 16,
    &quot;ObjectType&quot;: &quot;AnalogOutput&quot;,
    &quot;ObjectId&quot;: 70,
    &quot;DataCollectionMode&quot;: &quot;Poll&quot;,
    &quot;PropertyIdentifier&quot;: &quot;PresentValue&quot;
  }
]
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter-BACnet-Docs/blob/master/V1/Configuration/OSIsoft Adapter for BACnet data selection configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>© 2020 - OSIsoft, LLC.</span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
