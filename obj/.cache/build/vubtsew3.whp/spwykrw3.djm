<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Install OSIsoft Adapter for BACnet using Docker </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Install OSIsoft Adapter for BACnet using Docker ">
    <meta name="generator" content="docfx 2.54.0.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/main/V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="InstallOSIsoftAdapterForBACnetUsingDocker">
<h1 id="install-osisoft-adapter-for-bacnet-using-docker" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="5" sourceendlinenumber="5">Install OSIsoft Adapter for BACnet using Docker</h1>

<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="7" sourceendlinenumber="7">Docker is a set of tools that can be used on Linux to manage application deployments. </p>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="9" sourceendlinenumber="9"><strong>Note:</strong> If you want to use Docker, you must be familiar with the underlying technology and have determined that it is appropriate for your planned use of the BACnet Adapter. Docker is not a requirement to use adapter.</p>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="11" sourceendlinenumber="11">This topic provides examples of how to create a Docker container with the BACnet Adapter. </p>
<h2 id="create-a-startup-script-for-the-adapter" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="13" sourceendlinenumber="13">Create a startup script for the Adapter</h2>
<ol sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="15" sourceendlinenumber="130">
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="15" sourceendlinenumber="128"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="15" sourceendlinenumber="15">Using the text editor, create a script similar to the following.</p>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="17" sourceendlinenumber="17"> <strong>Note:</strong> The script varies slightly by processor.</p>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="19" sourceendlinenumber="19"> <strong>ARM32</strong></p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="21" sourceendlinenumber="54"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/BACnet_linux-arm/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
        portnum=${defaultPort} 
        echo &quot;Default value selected.&quot; ;
else
        echo $portnum | grep -q -E $re
        isNum=$?
        if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
                echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
                portnum=${defaultPort} ;
        fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
&quot;ApplicationSettings&quot;: {
        &quot;Port&quot;: ${portnum},
        &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/BACnet&quot;
        }
}
EOF
exec /BACnet_linux-arm/OSIsoft.Data.System.Host
</code></pre><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="56" sourceendlinenumber="56"> <strong>ARM64</strong></p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="58" sourceendlinenumber="91"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/BACnet_linux-arm64/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
        portnum=${defaultPort} 
        echo &quot;Default value selected.&quot; ;
else
        echo $portnum | grep -q -E $re
        isNum=$?
        if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
            echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
            portnum=${defaultPort} ;
        fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
&quot;ApplicationSettings&quot;: {
        &quot;Port&quot;: ${portnum},
        &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/BACnet&quot;
        }
}
EOF
exec /BACnet_linux-arm64/OSIsoft.Data.System.Host
</code></pre><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="93" sourceendlinenumber="93"> <strong>AMD64</strong></p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="95" sourceendlinenumber="128"><code class="lang-bash">#!/bin/sh
#local variables
defaultPort=5590
#regexp to only accept numerals
re=&#39;^[0-9]+$&#39;

portConfigFile=&quot;/BACnet_linux-x64/appsettings.json&quot;

#validate the port number input
if [ -z $portnum ] ; then
        portnum=${defaultPort} 
        echo &quot;Default value selected.&quot; ;
else
        echo $portnum | grep -q -E $re
        isNum=$?
        if [ $isNum -ne 0 ] || [ $portnum -le 1023 ] || [ $portnum -gt 49151 ] ; then
                echo &quot;Invalid input. Setting default value ${defaultPort} instead...&quot;
                portnum=${defaultPort} ;
        fi
fi

echo &quot;configuring port ${portnum}&quot;
#write out the port config file
cat &gt; ${portConfigFile} &lt;&lt; EOF
{
&quot;ApplicationSettings&quot;: {
        &quot;Port&quot;: ${portnum},
        &quot;ApplicationDataDirectory&quot;: &quot;/usr/share/OSIsoft/Adapters/BACnet&quot;
        }
}
EOF
exec /BACnet_linux-x64/OSIsoft.Data.System.Host
</code></pre></li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="130" sourceendlinenumber="130"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="130" sourceendlinenumber="130">Name the script <em>bacnetdockerstart.sh</em> and save it to the directory where you plan to create the container.</p>
</li>
</ol>
<h2 id="create-a-docker-container-containing-the-bacnet-adapter" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="132" sourceendlinenumber="132">Create a Docker container containing the BACnet Adapter</h2>
<ol sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="134" sourceendlinenumber="180">
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="134" sourceendlinenumber="172"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="134" sourceendlinenumber="134">Create the following <code>Dockerfile</code> in the directory where you want to create and run the container.</p>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="136" sourceendlinenumber="136"> <strong>Note:</strong> <code>Dockerfile</code> is the required name of the file. Use the variation according to your operating system:</p>
<h3 id="arm32" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="138" sourceendlinenumber="138">ARM32</h3>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="140" sourceendlinenumber="148"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY bacnetdockerstart.sh /
RUN chmod +x /bacnetdockerstart.sh
ADD ./BACnet_linux-arm.tar.gz .
ENTRYPOINT [&quot;/bacnetdockerstart.sh&quot;]
</code></pre><h3 id="arm64" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="150" sourceendlinenumber="150">ARM64</h3>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="152" sourceendlinenumber="160"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY bacnetdockerstart.sh /
RUN chmod +x /bacnetdockerstart.sh
ADD ./BACnet_linux-arm64.tar.gz .
ENTRYPOINT [&quot;/bacnetdockerstart.sh&quot;]
</code></pre><h3 id="amd64-x64" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="162" sourceendlinenumber="162">AMD64 (x64)</h3>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="164" sourceendlinenumber="172"><code class="lang-bash">FROM ubuntu
WORKDIR /
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends libicu60 libssl1.0.0
COPY bacnetdockerstart.sh /
RUN chmod +x /bacnetdockerstart.sh
ADD ./BACnet_linux-x64.tar.gz .
ENTRYPOINT [&quot;/bacnetdockerstart.sh&quot;]
</code></pre></li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="174" sourceendlinenumber="174"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="174" sourceendlinenumber="174">Copy the <code>BACnet_linux-\&lt;platform&gt;.tar.gz</code> file to the same directory as the <code>Dockerfile</code>.</p>
</li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="175" sourceendlinenumber="175">Copy the <code>bacnetdockerstart.sh</code> script to the same directory as the <code>Dockerfile</code>.</li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="176" sourceendlinenumber="180"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="176" sourceendlinenumber="176">Run the following command line in the same directory (<code>sudo</code> may be necessary):</p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="178" sourceendlinenumber="180"><code class="lang-bash">docker build -t bacnetadapter .
</code></pre></li>
</ol>
<h2 id="run-the-bacnet-adapter-docker-container" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="182" sourceendlinenumber="182">Run the BACnet Adapter Docker container</h2>
<h3 id="rest-access-from-the-local-host-to-the-docker-container" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="184" sourceendlinenumber="184">REST access from the local host to the Docker container</h3>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="186" sourceendlinenumber="186">Complete the following to run the container:</p>
<ol sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="188" sourceendlinenumber="193">
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="188" sourceendlinenumber="188">Open the docker container <code>bacnetadapter</code> previously created.</li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="189" sourceendlinenumber="193"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="189" sourceendlinenumber="189">Type the following in the command line (<code>sudo</code> may be necessary):</p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="191" sourceendlinenumber="193"><code class="lang-bash">docker run -d --network host bacnetadapter
</code></pre></li>
</ol>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="195" sourceendlinenumber="195">Port <code>5590</code> is accessible from the host and you can make REST calls to BACnet Adapter from applications on the local host computer. In this example, all data stored by the BACnet Adapter is stored in the container itself. When the container is deleted, the data stored is also deleted.</p>
<h3 id="persistent-storage-on-the-local-file-system-from-docker" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="197" sourceendlinenumber="197">Persistent storage on the local file system from Docker</h3>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="199" sourceendlinenumber="199">Complete the following to run the container:</p>
<ol sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="201" sourceendlinenumber="206">
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="201" sourceendlinenumber="201">Use the docker container image <code>bacnetadapter</code> previously created.</li>
<li sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="202" sourceendlinenumber="206"><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="202" sourceendlinenumber="202">Type the following in the command line (<code>sudo</code> may be necessary):</p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="204" sourceendlinenumber="206"><code class="lang-bash">docker run -d --network host -v /bacnet:/usr/share/OSIsoft/ bacnetadapter
</code></pre></li>
</ol>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="208" sourceendlinenumber="208">Port <code>5590</code> is accessible from the host and you can make REST calls to the BACnet Adapter from applications on the local host computer. In this example, all data that would be written to the container is instead written to the host directory and the host directory is a directory on the local machine, /bacnet. You can specify any directory.</p>
<h3 id="port-number-change" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="210" sourceendlinenumber="210">Port number change</h3>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="212" sourceendlinenumber="213">To use a different port other than <code>5590</code> you can specify a <code>portnum</code> variable on the <code>docker run</code> command line. For example, to 
start the adapter using port <code>6000</code> instead of <code>5590</code>, use the command line:</p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="215" sourceendlinenumber="217"><code class="lang-bash">docker run -d -e portnum=6000 --network host bacnetadapter
</code></pre><p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="219" sourceendlinenumber="219">This command accesses the REST API with port <code>6000</code> instead of port <code>5590</code>. The following <code>curl</code> command returns the configuration for the container.</p>
<pre sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="221" sourceendlinenumber="223"><code class="lang-bash">curl http://localhost:6000/api/v1/configuration
</code></pre><h3 id="remove-rest-access-to-the-docker-container" sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="225" sourceendlinenumber="225">Remove REST access to the Docker container</h3>
<p sourcefile="V1/Installation/Install the adapter with Docker for BACnet.md" sourcestartlinenumber="227" sourceendlinenumber="227">If you remove the <code>--network host</code> option from the docker run command, REST access is not possible from outside the container. This may be valuable when you want to host an application in the same container as BACnet Adapter, but do not want to have external REST access enabled.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/OSIsoft-Adapter-BACnet-Docs/blob/master/V1/Installation/Install the adapter with Docker for BACnet.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>© 2020 - OSIsoft, LLC.</span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
